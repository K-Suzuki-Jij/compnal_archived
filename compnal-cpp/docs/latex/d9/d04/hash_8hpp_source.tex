\hypertarget{hash_8hpp_source}{}\doxysection{hash.\+hpp}
\label{hash_8hpp_source}\index{src/utility/hash.hpp@{src/utility/hash.hpp}}
\mbox{\hyperlink{hash_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{//  Copyright 2022 Kohei Suzuki}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 \textcolor{comment}{//  Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{//  you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{//  You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{//}}
\DoxyCodeLine{8 \textcolor{comment}{//      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{9 \textcolor{comment}{//}}
\DoxyCodeLine{10 \textcolor{comment}{//  Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{11 \textcolor{comment}{//  distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{12 \textcolor{comment}{//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{13 \textcolor{comment}{//  See the License for the specific language governing permissions and}}
\DoxyCodeLine{14 \textcolor{comment}{//  limitations under the License.}}
\DoxyCodeLine{15 \textcolor{comment}{//}}
\DoxyCodeLine{16 \textcolor{comment}{//  hash.hpp}}
\DoxyCodeLine{17 \textcolor{comment}{//  compnal}}
\DoxyCodeLine{18 \textcolor{comment}{//}}
\DoxyCodeLine{19 \textcolor{comment}{//  Created by kohei on 2022/08/10.}}
\DoxyCodeLine{20 \textcolor{comment}{//  }}
\DoxyCodeLine{21 \textcolor{comment}{//}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#ifndef COMPNAL\_UTILITY\_HASH\_HPP\_}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define COMPNAL\_UTILITY\_HASH\_HPP\_}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <variant>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{type_8hpp}{type.hpp}}"{}}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecompnal}{compnal}} \{}
\DoxyCodeLine{30 \textcolor{keyword}{namespace }utility \{}
\DoxyCodeLine{31 }
\DoxyCodeLine{33 \textcolor{keyword}{struct }\mbox{\hyperlink{structcompnal_1_1utility_1_1_index_hash}{IndexHash}} \{}
\DoxyCodeLine{34    \textcolor{keyword}{template}<\textcolor{keyword}{class}... Types>}
\DoxyCodeLine{35    std::size\_t \mbox{\hyperlink{structcompnal_1_1utility_1_1_index_hash_a06daf1cc0499a2b054b8ed58c1e61858}{operator()}}(\textcolor{keyword}{const} std::variant<Types...> \&v)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{36       \textcolor{keywordflow}{if} (std::holds\_alternative<std::int32\_t>(v)) \{}
\DoxyCodeLine{37          \textcolor{keywordflow}{return} std::hash<std::int32\_t>()(std::get<std::int32\_t>(v));}
\DoxyCodeLine{38       \}}
\DoxyCodeLine{39       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::holds\_alternative<std::string>(v)) \{}
\DoxyCodeLine{40          \textcolor{keywordflow}{return} std::hash<std::string>()(std::get<std::string>(v));}
\DoxyCodeLine{41       \}}
\DoxyCodeLine{42       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::holds\_alternative<std::vector<IntStrType>>(v)) \{}
\DoxyCodeLine{43          \textcolor{keyword}{const} \textcolor{keyword}{auto} \&variant\_vec = std::get<std::vector<IntStrType>>(v);}
\DoxyCodeLine{44          std::size\_t hash = variant\_vec.size();}
\DoxyCodeLine{45          \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&i : variant\_vec) \{}
\DoxyCodeLine{46             \textcolor{keywordflow}{if} (std::holds\_alternative<std::int32\_t>(i)) \{}
\DoxyCodeLine{47                hash \string^= std::hash<std::int32\_t>()(std::get<std::int32\_t>(i)) + 0x9e3779b9 + (hash << 6) + (hash >> 2);}
\DoxyCodeLine{48             \}}
\DoxyCodeLine{49             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::holds\_alternative<std::string>(i)) \{}
\DoxyCodeLine{50                hash \string^= std::hash<std::string>()(std::get<std::string>(i)) + 0x9e3779b9 + (hash << 6) + (hash >> 2);}
\DoxyCodeLine{51             \}}
\DoxyCodeLine{52             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{53                \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Invalid template parameters"{}});}
\DoxyCodeLine{54             \}}
\DoxyCodeLine{55          \}}
\DoxyCodeLine{56          \textcolor{keywordflow}{return} hash;}
\DoxyCodeLine{57       \}}
\DoxyCodeLine{58       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{59          \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Invalid template parameters"{}});}
\DoxyCodeLine{60       \}}
\DoxyCodeLine{61    \}}
\DoxyCodeLine{62 \};}
\DoxyCodeLine{63 }
\DoxyCodeLine{65 \textcolor{keyword}{struct }\mbox{\hyperlink{structcompnal_1_1utility_1_1_index_vector_hash}{IndexVectorHash}} \{}
\DoxyCodeLine{66    std::size\_t \mbox{\hyperlink{structcompnal_1_1utility_1_1_index_vector_hash_a9471dbfc0edd8bf705d7505e381d3e4a}{operator()}}(\textcolor{keyword}{const} std::vector<IndexType> \&v)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{67       std::size\_t hash = v.size();}
\DoxyCodeLine{68       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&i : v) \{}
\DoxyCodeLine{69          hash \string^= \mbox{\hyperlink{structcompnal_1_1utility_1_1_index_hash}{IndexHash}}()(i) + 0x9e3779b9 + (hash << 6) + (hash >> 2);}
\DoxyCodeLine{70       \}}
\DoxyCodeLine{71       \textcolor{keywordflow}{return} hash;}
\DoxyCodeLine{72    \}}
\DoxyCodeLine{73 \};}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 }
\DoxyCodeLine{76 }
\DoxyCodeLine{77 }
\DoxyCodeLine{78 }
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \} \textcolor{comment}{// namespace utility}}
\DoxyCodeLine{81 \} \textcolor{comment}{// namespace compnal}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 }
\DoxyCodeLine{84 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* COMPNAL\_UTILITY\_HASH\_HPP\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
